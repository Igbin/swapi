<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<div id="result">
		<h1>List planet of star wars sorted by diameter</h1>
	</div>
	<input id="input" type="text" name="" onkeyup="myFunc()">
</body>
	<style type="text/css">
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">

var arr = [];
$(document).ready(function() {




function sortArr(a,b){
	return parseInt(a.diameter) - parseInt(b.diameter)
}

$.ajax({
	url: 'https://swapi.co/api/planets',
})
.done(function(text) {
	text.results.sort(sortArr)
	text.results.forEach(function(elem,index) {
	arr.push("<p>" + (index+1) + " "  + elem.name + "</p>")
})		
$('#result').append(arr);
	})
	
.fail(function() {
	$('#result').html('Ошибка загрузки');
});
})


var arr2 = [];

function myFunc() {
	var input = $("#input").val();
	var reg = new RegExp('(' + input + ')','g');

   arr2 = arr.map(function(elem,index) {
	if (elem.indexOf(input) != -1 && input!="") {

	return elem = elem.replace(reg , "<span style='background:yellow'>" + $("#input").val() + "</span>")

	} else {
		return elem + "<br>";
	}
})		
   	$('#result').empty();
	$('#result').append(arr2)


}


</script>





</body>
</html>